---
title: 当我们谈事务时，我们在谈什么
date: 2016年6月1日13:03:33
tags:
    - Transaction
    - Spring
    - MVCC
    - WAL
    - RedoLog
    - RelayLog
categories:
    - Summary
description: 数据库事务（简称：事务）是数据库管理系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成。
---

暂时未完成

## 写在前面

讨论传统关系型数据库内的事务，以及如何与NoSQL领域结合进行事务化。

## 什么是事务？

数据库事务（简称：事务）是数据库管理系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成。这是使用Google Search以“事务”为关键字查找时，第一条是wikipedia给出的描述。

## 单系统事务

### ACID

redo log，undo log。

### 逻辑事务 VS 物理事务

### 编程式事务 VS 声明式事务


### 事务隔离级别

#### 默认隔离级别

##### 不同ORM框架的默认隔离级别

##### 不同DB Proxy的默认隔离级别

##### 不同RDBMS的默认隔离级别

不同存储引擎的默认隔离级别

### 事务传播行为

#### 默认传播行为

### RDBMS如何权衡事务隔离与高并发读写？

#### MVCC与Free Lock

多线程环境下各种数据结构的实现有了很大的变化，每当我们更新某个数据的时候，我们都要考虑其它线程是否对其进行了修改。最简单的一种方法就是加锁，不过加锁会导致性能低下，而且可能阻塞其他线程。因此，我们引入了非阻塞(non-blocking)的算法 —— 通过CAS操作保证操作的原子性，同时我们还引入了 lock-free 的概念，它指的是一个线程出现问题（如阻塞，失败）但不影响其他线程（从总体看程序仍然是在运行的）

##### 共享锁

##### 排它锁

##### 间隙锁

### 在主从架构下RDBMS如何保证事务？

### 在双主结构下RDBMS如何保证事务？

### 双活数据中心的事务管理

## 分布式事务

### 事务解耦

### 事务补偿

### 事务回滚

### 最终资源一致性

### 与nosql

### 阿里DTS

## Reference

- [数据库事务-维基百科](https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1)